{"remainingRequest":"/Users/carlaheywood/Documents/GitHub/Accutrate/node_modules/babel-loader/lib/index.js!/Users/carlaheywood/Documents/GitHub/Accutrate/node_modules/eslint-loader/index.js??ref--13-0!/Users/carlaheywood/Documents/GitHub/Accutrate/src/store/modules/user.js","dependencies":[{"path":"/Users/carlaheywood/Documents/GitHub/Accutrate/src/store/modules/user.js","mtime":1561049016881},{"path":"/Users/carlaheywood/Documents/GitHub/Accutrate/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/carlaheywood/Documents/GitHub/Accutrate/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/carlaheywood/Documents/GitHub/Accutrate/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/Users/carlaheywood/Documents/GitHub/Accutrate/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport Vue from 'vue';\nimport axios from 'axios';\nimport VueAxios from 'vue-axios';\nimport { currentUser } from '@/constants/config';\nVue.use(VueAxios, axios);\nexport default {\n  state: {\n    currentUser: localStorage.getItem('user') != null ? JSON.parse(localStorage.getItem('user')) : null,\n    loginError: null,\n    processing: false\n  },\n  getters: {\n    currentUser: function currentUser(state) {\n      return state.currentUser;\n    },\n    processing: function processing(state) {\n      return state.processing;\n    },\n    loginError: function loginError(state) {\n      return state.loginError;\n    }\n  },\n  mutations: {\n    setUser: function setUser(state, payload) {\n      state.currentUser = payload;\n      state.processing = false;\n      state.loginError = null;\n    },\n    setLogout: function setLogout(state) {\n      state.currentUser = null;\n      state.processing = false;\n      state.loginError = null;\n    },\n    setProcessing: function setProcessing(state, payload) {\n      state.processing = payload;\n      state.loginError = null;\n    },\n    setError: function setError(state, payload) {\n      state.loginError = payload;\n      state.currentUser = null;\n      state.processing = false;\n    },\n    clearError: function clearError(state) {\n      state.loginError = null;\n    }\n  },\n  actions: {\n    register: function register(_ref, payload) {\n      var commit = _ref.commit;\n      commit('clearError');\n      console.log('Going to register', payload);\n      Vue.axios.post('http://localhost:3000/api/users', payload).then(function (response) {\n        console.log('THIS IS DATA FROM API: ', response);\n      });\n    },\n    login: function login(_ref2, payload) {\n      var commit = _ref2.commit;\n      commit('clearError');\n      commit('setProcessing', true);\n      Vue.axios.post('http://localhost:3000/api/users/login', payload).then(function (response) {\n        console.log('THIS IS THE DATA inside: ', response);\n\n        var item = _objectSpread({\n          uid: response.data.user._id,\n          token: response.data.token\n        }, currentUser);\n\n        localStorage.setItem('user', JSON.stringify(item));\n        console.log('storage: ', JSON.parse(localStorage.getItem('user')));\n        currentUser.title = response.data.user.firstname + ' ' + response.data.user.lastname;\n        commit('setUser', _objectSpread({\n          uid: item.uid\n        }, currentUser));\n      }); // firebase\n      //   .auth()\n      //   .signInWithEmailAndPassword(payload.email, payload.password)\n      //   .then(\n      //     user => {\n      //       const item = { uid: user.user.uid, ...currentUser }\n      //       localStorage.setItem('user', JSON.stringify(item))\n      //       commit('setUser', { uid: user.user.uid, ...currentUser })\n      //     },\n      //     err => {\n      //       localStorage.removeItem('user')\n      //       commit('setError', err.message)\n      //     }\n      //   )\n    },\n    signOut: function signOut(_ref3) {\n      var commit = _ref3.commit;\n      firebase.auth().signOut().then(function () {\n        localStorage.removeItem('user');\n        commit('setLogout');\n      }, function (_error) {});\n    }\n  }\n};",{"version":3,"sources":["/Users/carlaheywood/Documents/GitHub/Accutrate/src/store/modules/user.js"],"names":["firebase","Vue","axios","VueAxios","currentUser","use","state","localStorage","getItem","JSON","parse","loginError","processing","getters","mutations","setUser","payload","setLogout","setProcessing","setError","clearError","actions","register","commit","console","log","post","then","response","login","item","uid","data","user","_id","token","setItem","stringify","title","firstname","lastname","signOut","auth","removeItem","_error"],"mappings":";AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAO,eAAP;AACA,OAAOC,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AAEA,SAASC,WAAT,QAA4B,oBAA5B;AAEAH,GAAG,CAACI,GAAJ,CAAQF,QAAR,EAAkBD,KAAlB;AAEA,eAAe;AACbI,EAAAA,KAAK,EAAE;AACLF,IAAAA,WAAW,EAAEG,YAAY,CAACC,OAAb,CAAqB,MAArB,KAAgC,IAAhC,GAAuCC,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAvC,GAAkF,IAD1F;AAELG,IAAAA,UAAU,EAAE,IAFP;AAGLC,IAAAA,UAAU,EAAE;AAHP,GADM;AAMbC,EAAAA,OAAO,EAAE;AACPT,IAAAA,WAAW,EAAE,qBAAAE,KAAK;AAAA,aAAIA,KAAK,CAACF,WAAV;AAAA,KADX;AAEPQ,IAAAA,UAAU,EAAE,oBAAAN,KAAK;AAAA,aAAIA,KAAK,CAACM,UAAV;AAAA,KAFV;AAGPD,IAAAA,UAAU,EAAE,oBAAAL,KAAK;AAAA,aAAIA,KAAK,CAACK,UAAV;AAAA;AAHV,GANI;AAWbG,EAAAA,SAAS,EAAE;AACTC,IAAAA,OADS,mBACAT,KADA,EACOU,OADP,EACgB;AACvBV,MAAAA,KAAK,CAACF,WAAN,GAAoBY,OAApB;AACAV,MAAAA,KAAK,CAACM,UAAN,GAAmB,KAAnB;AACAN,MAAAA,KAAK,CAACK,UAAN,GAAmB,IAAnB;AACD,KALQ;AAMTM,IAAAA,SANS,qBAMEX,KANF,EAMS;AAChBA,MAAAA,KAAK,CAACF,WAAN,GAAoB,IAApB;AACAE,MAAAA,KAAK,CAACM,UAAN,GAAmB,KAAnB;AACAN,MAAAA,KAAK,CAACK,UAAN,GAAmB,IAAnB;AACD,KAVQ;AAWTO,IAAAA,aAXS,yBAWMZ,KAXN,EAWaU,OAXb,EAWsB;AAC7BV,MAAAA,KAAK,CAACM,UAAN,GAAmBI,OAAnB;AACAV,MAAAA,KAAK,CAACK,UAAN,GAAmB,IAAnB;AACD,KAdQ;AAeTQ,IAAAA,QAfS,oBAeCb,KAfD,EAeQU,OAfR,EAeiB;AACxBV,MAAAA,KAAK,CAACK,UAAN,GAAmBK,OAAnB;AACAV,MAAAA,KAAK,CAACF,WAAN,GAAoB,IAApB;AACAE,MAAAA,KAAK,CAACM,UAAN,GAAmB,KAAnB;AACD,KAnBQ;AAoBTQ,IAAAA,UApBS,sBAoBGd,KApBH,EAoBU;AACjBA,MAAAA,KAAK,CAACK,UAAN,GAAmB,IAAnB;AACD;AAtBQ,GAXE;AAmCbU,EAAAA,OAAO,EAAE;AACPC,IAAAA,QADO,0BACeN,OADf,EACwB;AAAA,UAAnBO,MAAmB,QAAnBA,MAAmB;AAC7BA,MAAAA,MAAM,CAAC,YAAD,CAAN;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCT,OAAjC;AACAf,MAAAA,GAAG,CAACC,KAAJ,CAAUwB,IAAV,CAAe,iCAAf,EAAkDV,OAAlD,EACGW,IADH,CACQ,UAACC,QAAD,EAAc;AAClBJ,QAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuCG,QAAvC;AACD,OAHH;AAID,KARM;AASPC,IAAAA,KATO,wBASYb,OATZ,EASqB;AAAA,UAAnBO,MAAmB,SAAnBA,MAAmB;AAC1BA,MAAAA,MAAM,CAAC,YAAD,CAAN;AACAA,MAAAA,MAAM,CAAC,eAAD,EAAkB,IAAlB,CAAN;AACAtB,MAAAA,GAAG,CAACC,KAAJ,CAAUwB,IAAV,CAAe,uCAAf,EAAwDV,OAAxD,EACGW,IADH,CACQ,UAACC,QAAD,EAAc;AAClBJ,QAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCG,QAAzC;;AACA,YAAME,IAAI;AAAKC,UAAAA,GAAG,EAAEH,QAAQ,CAACI,IAAT,CAAcC,IAAd,CAAmBC,GAA7B;AAAkCC,UAAAA,KAAK,EAAEP,QAAQ,CAACI,IAAT,CAAcG;AAAvD,WAAiE/B,WAAjE,CAAV;;AACAG,QAAAA,YAAY,CAAC6B,OAAb,CAAqB,MAArB,EAA6B3B,IAAI,CAAC4B,SAAL,CAAeP,IAAf,CAA7B;AACAN,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBhB,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAzB;AACAJ,QAAAA,WAAW,CAACkC,KAAZ,GAAoBV,QAAQ,CAACI,IAAT,CAAcC,IAAd,CAAmBM,SAAnB,GAA+B,GAA/B,GAAqCX,QAAQ,CAACI,IAAT,CAAcC,IAAd,CAAmBO,QAA5E;AACAjB,QAAAA,MAAM,CAAC,SAAD;AAAcQ,UAAAA,GAAG,EAAED,IAAI,CAACC;AAAxB,WAAgC3B,WAAhC,EAAN;AACD,OARH,EAH0B,CAY1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,KAnCM;AAoCPqC,IAAAA,OApCO,0BAoCc;AAAA,UAAVlB,MAAU,SAAVA,MAAU;AACnBvB,MAAAA,QAAQ,CACL0C,IADH,GAEGD,OAFH,GAGGd,IAHH,CAGQ,YAAM;AACVpB,QAAAA,YAAY,CAACoC,UAAb,CAAwB,MAAxB;AACApB,QAAAA,MAAM,CAAC,WAAD,CAAN;AACD,OANH,EAMK,UAAAqB,MAAM,EAAI,CAAE,CANjB;AAOD;AA5CM;AAnCI,CAAf","sourcesContent":["import firebase from 'firebase/app'\r\nimport 'firebase/auth'\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport VueAxios from 'vue-axios'\r\n\r\nimport { currentUser } from '@/constants/config'\r\n\r\nVue.use(VueAxios, axios)\r\n\r\nexport default {\r\n  state: {\r\n    currentUser: localStorage.getItem('user') != null ? JSON.parse(localStorage.getItem('user')) : null,\r\n    loginError: null,\r\n    processing: false\r\n  },\r\n  getters: {\r\n    currentUser: state => state.currentUser,\r\n    processing: state => state.processing,\r\n    loginError: state => state.loginError\r\n  },\r\n  mutations: {\r\n    setUser (state, payload) {\r\n      state.currentUser = payload\r\n      state.processing = false\r\n      state.loginError = null\r\n    },\r\n    setLogout (state) {\r\n      state.currentUser = null\r\n      state.processing = false\r\n      state.loginError = null\r\n    },\r\n    setProcessing (state, payload) {\r\n      state.processing = payload\r\n      state.loginError = null\r\n    },\r\n    setError (state, payload) {\r\n      state.loginError = payload\r\n      state.currentUser = null\r\n      state.processing = false\r\n    },\r\n    clearError (state) {\r\n      state.loginError = null\r\n    }\r\n  },\r\n  actions: {\r\n    register ({ commit }, payload) {\r\n      commit('clearError')\r\n      console.log('Going to register', payload)\r\n      Vue.axios.post('http://localhost:3000/api/users', payload)\r\n        .then((response) => {\r\n          console.log('THIS IS DATA FROM API: ', response)\r\n        })\r\n    },\r\n    login ({ commit }, payload) {\r\n      commit('clearError')\r\n      commit('setProcessing', true)\r\n      Vue.axios.post('http://localhost:3000/api/users/login', payload)\r\n        .then((response) => {\r\n          console.log('THIS IS THE DATA inside: ', response)\r\n          const item = { uid: response.data.user._id, token: response.data.token, ...currentUser }\r\n          localStorage.setItem('user', JSON.stringify(item))\r\n          console.log('storage: ', JSON.parse(localStorage.getItem('user')))\r\n          currentUser.title = response.data.user.firstname + ' ' + response.data.user.lastname\r\n          commit('setUser', { uid: item.uid, ...currentUser })\r\n        })\r\n      // firebase\r\n      //   .auth()\r\n      //   .signInWithEmailAndPassword(payload.email, payload.password)\r\n      //   .then(\r\n      //     user => {\r\n      //       const item = { uid: user.user.uid, ...currentUser }\r\n      //       localStorage.setItem('user', JSON.stringify(item))\r\n      //       commit('setUser', { uid: user.user.uid, ...currentUser })\r\n      //     },\r\n      //     err => {\r\n      //       localStorage.removeItem('user')\r\n      //       commit('setError', err.message)\r\n      //     }\r\n      //   )\r\n    },\r\n    signOut ({ commit }) {\r\n      firebase\r\n        .auth()\r\n        .signOut()\r\n        .then(() => {\r\n          localStorage.removeItem('user')\r\n          commit('setLogout')\r\n        }, _error => {})\r\n    }\r\n  }\r\n}\r\n"]}]}