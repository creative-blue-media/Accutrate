{"remainingRequest":"/Users/carlaheywood/Documents/GitHub/Accutrate/node_modules/babel-loader/lib/index.js!/Users/carlaheywood/Documents/GitHub/Accutrate/node_modules/eslint-loader/index.js??ref--13-0!/Users/carlaheywood/Documents/GitHub/Accutrate/src/store/modules/user.js","dependencies":[{"path":"/Users/carlaheywood/Documents/GitHub/Accutrate/src/store/modules/user.js","mtime":1554628934000},{"path":"/Users/carlaheywood/Documents/GitHub/Accutrate/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/carlaheywood/Documents/GitHub/Accutrate/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/carlaheywood/Documents/GitHub/Accutrate/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/Users/carlaheywood/Documents/GitHub/Accutrate/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport { currentUser } from '@/constants/config';\nexport default {\n  state: {\n    currentUser: localStorage.getItem('user') != null ? JSON.parse(localStorage.getItem('user')) : null,\n    loginError: null,\n    processing: false\n  },\n  getters: {\n    currentUser: function currentUser(state) {\n      return state.currentUser;\n    },\n    processing: function processing(state) {\n      return state.processing;\n    },\n    loginError: function loginError(state) {\n      return state.loginError;\n    }\n  },\n  mutations: {\n    setUser: function setUser(state, payload) {\n      state.currentUser = payload;\n      state.processing = false;\n      state.loginError = null;\n    },\n    setLogout: function setLogout(state) {\n      state.currentUser = null;\n      state.processing = false;\n      state.loginError = null;\n    },\n    setProcessing: function setProcessing(state, payload) {\n      state.processing = payload;\n      state.loginError = null;\n    },\n    setError: function setError(state, payload) {\n      state.loginError = payload;\n      state.currentUser = null;\n      state.processing = false;\n    },\n    clearError: function clearError(state) {\n      state.loginError = null;\n    }\n  },\n  actions: {\n    login: function login(_ref, payload) {\n      var commit = _ref.commit;\n      commit('clearError');\n      commit('setProcessing', true);\n      firebase.auth().signInWithEmailAndPassword(payload.email, payload.password).then(function (user) {\n        var item = _objectSpread({\n          uid: user.user.uid\n        }, currentUser);\n\n        localStorage.setItem('user', JSON.stringify(item));\n        commit('setUser', _objectSpread({\n          uid: user.user.uid\n        }, currentUser));\n      }, function (err) {\n        localStorage.removeItem('user');\n        commit('setError', err.message);\n      });\n    },\n    signOut: function signOut(_ref2) {\n      var commit = _ref2.commit;\n      firebase.auth().signOut().then(function () {\n        localStorage.removeItem('user');\n        commit('setLogout');\n      }, function (_error) {});\n    }\n  }\n};",{"version":3,"sources":["/Users/carlaheywood/Documents/GitHub/Accutrate/src/store/modules/user.js"],"names":["firebase","currentUser","state","localStorage","getItem","JSON","parse","loginError","processing","getters","mutations","setUser","payload","setLogout","setProcessing","setError","clearError","actions","login","commit","auth","signInWithEmailAndPassword","email","password","then","user","item","uid","setItem","stringify","err","removeItem","message","signOut","_error"],"mappings":"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","sourcesContent":["import firebase from 'firebase/app'\r\nimport 'firebase/auth'\r\nimport { currentUser } from '@/constants/config'\r\n\r\nexport default {\r\n  state: {\r\n    currentUser: localStorage.getItem('user') != null ? JSON.parse(localStorage.getItem('user')) : null,\r\n    loginError: null,\r\n    processing: false\r\n  },\r\n  getters: {\r\n    currentUser: state => state.currentUser,\r\n    processing: state => state.processing,\r\n    loginError: state => state.loginError\r\n  },\r\n  mutations: {\r\n    setUser (state, payload) {\r\n      state.currentUser = payload\r\n      state.processing = false\r\n      state.loginError = null\r\n    },\r\n    setLogout (state) {\r\n      state.currentUser = null\r\n      state.processing = false\r\n      state.loginError = null\r\n    },\r\n    setProcessing (state, payload) {\r\n      state.processing = payload\r\n      state.loginError = null\r\n    },\r\n    setError (state, payload) {\r\n      state.loginError = payload\r\n      state.currentUser = null\r\n      state.processing = false\r\n    },\r\n    clearError (state) {\r\n      state.loginError = null\r\n    }\r\n  },\r\n  actions: {\r\n\r\n    login ({ commit }, payload) {\r\n      commit('clearError')\r\n      commit('setProcessing', true)\r\n      firebase\r\n        .auth()\r\n        .signInWithEmailAndPassword(payload.email, payload.password)\r\n        .then(\r\n          user => {\r\n            const item = { uid: user.user.uid, ...currentUser }\r\n            localStorage.setItem('user', JSON.stringify(item))\r\n            commit('setUser', { uid: user.user.uid, ...currentUser })\r\n          },\r\n          err => {\r\n            localStorage.removeItem('user')\r\n            commit('setError', err.message)\r\n          }\r\n        )\r\n    },\r\n    signOut ({ commit }) {\r\n      firebase\r\n        .auth()\r\n        .signOut()\r\n        .then(() => {\r\n          localStorage.removeItem('user')\r\n          commit('setLogout')\r\n        }, _error => {})\r\n    }\r\n  }\r\n}\r\n"]}]}